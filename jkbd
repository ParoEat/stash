#!desc=驾考宝典去广告（闲鱼：大菠萝的店）
#!homepage=闲鱼：大菠萝的店
#!author=大菠萝的店
#!icon=https://img.icons8.com/fluency/96/000000/driver-license.png

mitm:
  - "jiaxiao-awd.kakamobi.cn"
  - "cheyouquan.kakamobi.com"
  - "swallow.kakamobi.cn"
  - "monkey.kakamobi.cn"
  - "splash.jiakao.com"

rewrite:
  - url: ^https?://jiaxiao-awd.kakamobi.cn/.*splash.*
    script: |
      body = '{"code":-1,"msg":"no ad"}'
  - url: ^https?://cheyouquan.kakamobi.com/.*ad.*
    script: |
      body = '{"code":-1,"msg":"no ad"}'
  - url: ^https?://swallow.kakamobi.cn/.*advert.*
    script: |
      body = '{"code":-1,"msg":"no ad"}'

script:
  - match: ^https?://.*jiakao.com/.*
    name: 驾考宝典开屏广告拦截
    script: |
      setTimeout(() => {
        const ad = document.querySelector('.splash-ad');
        ad && ad.remove();
      }, 100);

filter:
  - process-name: com.jiakao.basics
    enabled: true
    {
      "name": "拦截推送广告接口",
      "match": "https?://monkey.kakamobi.cn/.*push.*ad.*",
      "replace": "",
      "processes": [
        "com.jiakao.basics"
      ]
    },
    {
      "name": "拦截驾考宝典主站广告",
      "match": "https?://splash.jiakao.com/.*",
      "replace": "data:text/plain,",
      "processes": [
        "com.jiakao.basics"
      ]
    }
  ],
  "script": {
    "shortcut": "",
    "body": ""
  },
  "trigger": {
    "wifi": [],
    "cellular": [],
    "domain": [],
    "process": [
      "com.jiakao.basics"
    ]
  }
}
      "replace": "",
      "processes": [
        "com.jiakao.basics"
      ]
    },
    {
      "name": "拦截头条系广告推送",
      "match": "https?://.*toutiao.com/ad/.*",
      "replace": "",
      "processes": [
        "com.jiakao.basics"
      ]
    }
  ],
  "script": {
    "shortcut": "",
    "body": ""
  },
  "trigger": {
    "wifi": [],
    "cellular": [],
    "domain": [],
    "process": [
      "com.jiakao.basics"
    ]
  }
}
